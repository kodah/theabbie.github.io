<!DOCTYPE html>
<script id="worker1" type="javascript/worker">
  self.onmessage = function(e) {
    self.postMessage('msg from worker');
  }
</script>
<script>
  var blob = new Blob([
    document.querySelector('#worker1').textContent
  ], { type: "text/javascript" })
var scope = {
  scope: './'
};
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register(
    window.URL.createObjectURL(blob),
    scope
  ).then( function(serviceWorker) {
    console.log('successful');
  }).catch(function(error) {
    alert("error");
  });
} else {
  console.log('unavailable');
}
</script>
