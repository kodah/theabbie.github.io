<!DOCTYPE html>
<html lang="en">
<head>
  <title>Form</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
 Â <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://kit.fontawesome.com/473e8f3a80.js" crossorigin="anonymous"></script>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
<div class="container">
  <h2>Location Survey:</h2>
  <form>
  <div class="form-group">
      <label for="Roll No"><b>SCAN BAR CODE:</b></label><br>
      <canvas class="frame" height="250" width="250" style="border-radius: 10px;"></canvas><br>
      <label for="Roll No"><b>Name:</b></label>
      <input type="text" class="form-control" placeholder="Enter Name"><br>
      <div class="g-recaptcha" data-sitekey="6LdHa8kUAAAAAGQAL3XynkQfHxP9xo1mRCKUn0BS" data-callback="save"></div><br>
    </div>
    </form>
<button onclick="track()" class="btn btn-primary"><i class="fas fa-compass" style="font-size:24px;"></i> Get Location</button>
<button onclick="save()" class="btn btn-primary" id="submit" style="display: none;">Submit</button>
</div>
</body>
<script>
var rno;
var loc = {lat: "", lon: ""};
function track() {
navigator.geolocation.getCurrentPosition(function(pos) {
loc.lat=pos.coords.latitude;
loc.lon=pos.coords.longitude;
document.querySelector("#data").innerHTML+=("<b>Your current coordinates:</b><br>"+pos.coords.latitude + "," + pos.coords.longitude);
});
document.querySelector("#submit").style.display="inline";
}
function save() {
alert("Thank you, your response has been recorded");
}
var video = document.createElement("video");
video.setAttribute("autoplay","true");
var canvas = document.querySelector(".frame");
navigator.mediaDevices.getUserMedia({video: { facingMode: { exact: "environment" } } }).then(function(stream) {
video.srcObject = stream;
});
var ctr = setInterval(function() {canvas.getContext("2d").drawImage(video, 0, 0, 250, 250)},0)
canvas.onclick = function() {
clearInterval(ctr);
alert(canvas.toDataURL());
navigator.mediaDevices.getUserMedia({video: { facingMode: { exact: "environment" } } }).then(function(stream) {
stream.getTracks().forEach(function(track) {track.stop();});
});
}
</script>
</html>
