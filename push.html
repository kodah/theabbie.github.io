<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Firebase push notifications using Javascript">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Push" />
<meta property="og:description" content="Firebase push notifications using Javascript" />
<meta property="og:url" content="https://theabbie.github.io/push" />
<meta property="og:site_name" content="TheAbbie" />
<meta property="article:section" content="application" />
<meta property="article:published_time" content="2020-04-22T08:34:48+00:00" />
<meta property="article:modified_time" content="2020-04-22T08:34:51+00:00" />
<meta property="og:updated_time" content="2020-04-22T08:34:51+00:00" />
<meta property="og:image" content="https://theabbie.github.io/files/share.jpg" />
<meta property="og:image:secure_url" content="https://theabbie.github.io/files/share.jpg" />
<meta property="og:image:width" content="600" />
<meta property="og:image:height" content="445" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="Firebase push notifications using Javascript" />
<meta name="twitter:title" content="Push" />
<meta name="twitter:image" content="https://theabbie.github.io/files/share.jpg" />

<title>
Push Notifications
</title>
<h1>
Please wait ...
</h1>
<script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-messaging.js"></script>
<script>
var firebaseConfig = {
    apiKey: "AIzaSyBECQksrlWkWOTP4jriMmA9thfcKgbHyuE",
    authDomain: "codrcrew.firebaseapp.com",
    databaseURL: "https://codrcrew.firebaseio.com",
    projectId: "codrcrew",
    storageBucket: "codrcrew.appspot.com",
    messagingSenderId: "517463115484",
    appId: "1:517463115484:web:93ce55f61c78b015371619",
    measurementId: "G-Z9TTWE5FSJ"
};
firebase.initializeApp(firebaseConfig);
const messaging = firebase.messaging();
messaging.usePublicVapidKey("BImi-culCtCIsgG5VwdP29eGXVbnpSg6yXFauPVf2BInA-RN1PzslveoLtohbPpK3k5KAkx53RJMsfqHWI26p_k");
navigator.serviceWorker.register('sw.js').then((registration) => {
messaging.useServiceWorker(registration);
Notification.requestPermission().then((permission) => {
  if (permission === 'granted') {
    messaging.getToken().then((currentToken) => {
  if (currentToken) {
    document.body.innerHTML+=currentToken;
    fetch("https://theabbie.web.app/api?token="+currentToken).then(function() {location.href="https://theabbie.github.io"})
  } else {
    location.reload();
  }
}).catch((err) => {
  alert(err);
});
  } else {
    alert("Please allow notification access");
  }
});
});
</script>
</html>
