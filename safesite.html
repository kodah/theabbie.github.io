<html>
<head>
<title>SafeSite-Safer Than Safest</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> 
<link rel="shortcut icon" type="image/ico" href="icon.ico"/>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<style>
body {background: url('back.jpg'); background-size: cover;  background-position: center; background-attachment: fixed;}
* {font-family: century gothic; word-spacing: 2px; word-spacing: 4px;}
.options {width:10%; transition: all 2s; position: relative; width: 10%; display: inline-block;}
.options:hover {background-color: aqua;}
.text {border-bottom-color: dimgrey; transition: all 0s; position: relative; padding: 3px; background-color: transparent; border: none; border-bottom: 2px solid dimgrey; width: 90%;}
.text:focus {border-bottom: 3px solid teal;}
.tab {overflow: hidden;border: 1px solid #ccc;background-color: #f1f1f1;}
.tab button {background-color: inherits;border: none;outline: none;cursor: pointer;padding: 14px 16px;transition: 0.3s;font-size: 17px; width: 50%; text-shadow:1px 1px grey;}
.tab button:hover {background-color: #ddd;}
.tab button:active {background-color: #ccc;}
.swal-overlay {background-color: rgba(0, 0, 0, 0.45);}
#filebutton {opacity: 0.1;}
</style>
</head>
<body>
    <div style="white-space: nowrap;">
        <div id="header" class="w3-bar w3-card-4 w3-center w3-teal w3-xxlarge w3-padding-24" style="font-family: century gothic; width: 100%; position: relative;  display: inline-block;">Safe site <span class="w3-round w3-tag" style="background-color: aquamarine; color: brown;">.tk</span></div>
    </div>
    <div id="logbox" class="w3-card-4 w3-xlarge w3-center" style="background-color: aliceblue; position: relative; margin: auto; margin-top: 50px; display: block; padding: 0 0 15 0">
    <div class="tab" style="top: 0px;">
    <button class="tablinks" onclick="show_login()" style="float: left;">Log In</button>
    <button class="tablinks" onclick="show_signup()" style="float: right;">Sign Up</button>
    </div>
    <div id="login">
    Already owning the safest account on the web, login here<br>
    <hr style="border-color: dimgrey; border-width: 5px;">
        <b>E-Mail:</b><br>
    <input type="text" class="text" id="name"><br>
    <hr style="border-color: dimgrey; border-width: 5px;">
        <b>Password:</b><br>
    <input type="password" class="text" id="key"><br>
    <hr style="border-color: dimgrey; border-width: 5px;">
    <button class="w3-btn w3-padding-16 w3-card-4 w3-green" onclick="check()" style="width: 90%; height: 10%; border-radius: 1%">GO</button>
    </div>
    <div id="signup" style="display: none;">
    Get ready to create the safest account on the web.<br>
    <hr style="border-color: dimgrey; border-width: 5px;">
        <b>E-Mail:</b><br>
    <input type="text" class="text" id="newname"><br>
    <hr style="border-color: dimgrey; border-width: 5px;">
        <b>Password:</b><br>
    <input type="password" class="text" id="newkey"><br>
    <hr style="border-color: dimgrey; border-width: 5px;">
    <button class="w3-btn w3-padding-16 w3-card-4 w3-green" onclick="savepass();" style="width: 90%; height: 10%; border-radius: 1%">GO</button>
     <input type="file" value="upload" id="filebutton" style="">
    </div>
    </div>
    <br><br>
    <table id="data" class="w3-table-all w3-card-4 w3-striped w3-bordered" style="width: 100%;"></table>
    <script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBZYj61fKNIzX1BvYHNoo42sBRVThhaywM",
    authDomain: "onentertainer.firebaseapp.com",
    databaseURL: "https://onentertainer.firebaseio.com",
    projectId: "onentertainer",
    storageBucket: "onentertainer.appspot.com",
    messagingSenderId: "43873389504"
  };
  firebase.initializeApp(config); 
        
//
        
    var filebutton = document.getElementById("filebutton");
    filebutton.addEventListener('change', function(e) {
        var file = e.target.files[0];
        firebase.storage().ref('files/' + file.name).put(file)
    });
        
//
        
var database = firebase.database();
  var ref;
  if (ref!=undefined) {ref.on('value', gotData)
  function gotData(data) {
     document.getElementById("data").innerHTML = "<thead><tr class='w3-teal'><th>Username</th><th>Password</th></tr></thead>";
         document.getElementById("data").innerHTML += "<tr class='w3-hover-light-grey'><td>" + data.val().name + "</td><td>" + data.val().password + "</td></tr>";
 }}
        
//
        
firebase.auth().onAuthStateChanged(login);
function login(user) {
if (user) {
ref = database.ref('users/'+user.uid);
var l = document.createElement("p");
l.innerHTML = "<img height='100px' width='100px' src='" + user.photoURL + "'><br><br>" + user.displayName;
swal({
  buttons: false,
  timer: 1500,
  content: l
});
}
else {
var provider = new firebase.auth.GoogleAuthProvider();
provider.addScope('https://www.googleapis.com/auth/userinfo.profile');
firebase.auth().signInWithRedirect(provider);
}
}
    
//
    
function check() {
var flag = 0;
var username = document.getElementById("name").value;
var pass = document.getElementById("key").value;
ref.on('value', function(data) {
    if ((data.val().name == username) && (data.val().password == pass)) {
       swal("Congratulations !", "Sucessfully logged in " + data.val().name , "success");
       flag = 1;
    }
if (flag == 0) {
swal("Sorry", "Matching user credentials does not exist", "error");
}
});
}
    
//
    
function savepass() {
data = {
name: document.getElementById("newname").value,
password: document.getElementById("newkey").value
}
ref.set(data);
var p = document.createElement("p");
p.innerHTML = " <input type='file' value='upload' id='filebutton'>";
swal({
  title: "Congratulations !",
  text: "Sucessfully signed up",
  icon: "success",
  buttons: "ok",
  content: p
})
}
    
//
    
function encrypt() {
var x = document.getElementById("key").value;
var conv_x = [];
var copy_conv_x = [];
var rank = [];
var asc_rank = [];
var rank = [];
var mod_x = [];
var mat_p = [];
var raw_x = [];
var m,n = 0;
var neg,zero,pos = 0;
var p = 3;
var c,l;
var zero = x.split(' ').length-1;
var ch = [" ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
var ch_x = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26];
conv(x);
function conv(x) {
for (i=0; i<=x.length-1; i++) {
conv_x[i] = ch_x[ch.indexOf(x.charAt(i))];
copy_conv_x[i] = ch_x[ch.indexOf(x.charAt(i))];
}}
for (i=0; i<x.length; i++) {
if (conv_x[i] <= -1) {neg++;}
else if (conv_x[i] == 0) {zero++;}
else {pos++;}
}
if (neg==0 && zero==0 && pos!=0) {
for (i=0; i<pos; i++) {asc_rank[i] = i+1;}
}
else if (neg==0 && zero!=0 && pos==0) {
for (i=0; i<zero; i++) {asc_rank[i]=1}
}
else if (neg!=0 && zero==0 && pos==0) {
for (i=0; i<neg; i++) {asc_rank[i]=i-neg;}
}
else if (neg!=0 && zero!=0 && pos==0) {
for (i=0; i<(neg+zero); i++) {asc_rank[i]=i-neg;}
}
else if (neg!=0 && zero==0 && pos!=0) {
for (i=0; i<x.length; i++) {asc_rank[i]=i-neg;}
for (i=n; i<x.length; i++) {asc_rank[i]++;}
}
else if (neg==0 && zero!=0 && pos!=0) {
for (i=0; i<x.length; i++) {asc_rank[i]=i;}
}
else if (neg!=0 && zero!=0 && pos!=0) {
for (i=0; i<x.length; i++) {asc_rank[i]=i-neg;}
}
else {asc_rank==null;}
console.log(conv_x,neg,zero,pos);
for (i=0; i<=x.length-1; i++) {
if (rank[i] != 0) {
mod_x[i] = conv_x[i] % rank[i];
}
else {
mod_x[i] = 0;
}
}
if (x.length <= 9) {m=3;n=3;}
else if (x.length > 9 && x.length <= 12) {m=4;n=3;}
else if (x.length > 12 && x.length <= 16) {m=4;n=4;}
else if (x.length > 16 && x.length <= 20) {m=5;n=4;}
else if (x.length > 20 && x.length <= 25) {m=5;n=5;}
else {m=6;n=5;}
for (i=1; i<=m; i++) {
    for (j=1; j<=m; j++) {
        if (i!=j) {
        mat_p[m*(j-1)+i] = ((Math.pow(i,p+1)-Math.pow(j,p+1))/(i-j))%p;
        }
        else {
        mat_p[m*(j-1)+i] = 0;
        }
    }
}
function mtp(a,b) {
var sum = 0;
for (i=1; i<=m; i++) {
    sum+=(mat_p[m*(i-1)+a])*(mod_x[m*(b-1)+i]);
}
return sum
}
for (i=1; i<=m; i++) {
    for (j=1; j<=n; j++) {
        raw_x[m*(j-1)+i] = mtp(i,j);
    }
}
return raw_x;
}
        
//
        
function show_login() {
    document.getElementById("login").style.display = "block";
    document.getElementById("signup").style.display = "none";
}
function show_signup() {
    document.getElementById("login").style.display = "none";
    document.getElementById("signup").style.display = "block";
}
function xx(x) {return document.getElementsByClassName(x)[0] || document.getElementsByTagName(x)[0] || document.getElementById(x)};
xx("logbox").style.width = (window.innerWidth>=450)?400:(window.innerWidth-2*20);
</script>
</body>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.3.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: "AIzaSyBECQksrlWkWOTP4jriMmA9thfcKgbHyuE",
    authDomain: "codrcrew.firebaseapp.com",
    databaseURL: "https://codrcrew.firebaseio.com",
    projectId: "codrcrew",
    storageBucket: "codrcrew.appspot.com",
    messagingSenderId: "517463115484",
    appId: "1:517463115484:web:93ce55f61c78b015371619"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
</script>
</html>
